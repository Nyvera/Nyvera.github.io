<script>
// Cursor follower with pulsing and trail
const follower = document.querySelector('.cursor-follower');
let mouseX = 0, mouseY = 0, posX = 0, posY = 0, speed = 0.15;

// Trail setup
const trailCount = 20;
let trail = [];
for (let i = 0; i < trailCount; i++) trail.push({x:0, y:0, alpha:0});

// Resize trail canvas
const trailCanvas = document.createElement('canvas');
trailCanvas.style.position='fixed';
trailCanvas.style.top='0';
trailCanvas.style.left='0';
trailCanvas.style.width='100%';
trailCanvas.style.height='100%';
trailCanvas.style.pointerEvents='none';
trailCanvas.style.zIndex = '9998';
document.body.appendChild(trailCanvas);
const ctx = trailCanvas.getContext('2d');
function resizeCanvas() {
  trailCanvas.width = window.innerWidth;
  trailCanvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

// Mouse tracking
document.addEventListener('mousemove', e => {
  mouseX = e.clientX;
  mouseY = e.clientY;
});

// Click pulse effect
document.addEventListener('mousedown', () => {
  follower.style.transition = 'width 0.1s, height 0.1s, box-shadow 0.1s';
  follower.style.width = '60px';
  follower.style.height = '60px';
  follower.style.boxShadow = '0 0 30px rgba(124,58,237,1), 0 0 50px rgba(124,58,237,0.6)';
  setTimeout(() => {
    follower.style.width = '40px';
    follower.style.height = '40px';
    follower.style.boxShadow = '0 0 20px rgba(255,255,255,0.6)';
  }, 100);
});

// Animate orb and trail
function animateFollower() {
  // Smooth follow
  posX += (mouseX - posX) * speed;
  posY += (mouseY - posY) * speed;

  // Center the orb
  follower.style.transform = `translate(${posX}px, ${posY}px) translate(-50%, -50%)`;

  // Update trail
  trail.unshift({x: posX, y: posY, alpha: 1});
  if(trail.length > trailCount) trail.pop();

  // Draw trail
  ctx.clearRect(0, 0, trailCanvas.width, trailCanvas.height);
  trail.forEach((p,i)=>{
    ctx.beginPath();
    ctx.arc(p.x, p.y, (trailCount-i)/4 + 4, 0, Math.PI*2);
    ctx.fillStyle = `rgba(124,58,237,${p.alpha * 0.4})`;
    ctx.fill();
    p.alpha *= 0.85;
  });

  requestAnimationFrame(animateFollower);
}

animateFollower();
</script>
